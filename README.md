# docker-base

Container images at https://ghcr.io/yolean/

`Dockerfile`s build as `USER root`.
For each image in the TONONROOT list, a `:latest` tag is produced by appending
[nonroot-footer.Dockerfile](./nonroot-footer.Dockerfile) which switches to UID 65532.

## Build locally

Build a single image and its dependencies:

    ./build.sh node-kafka

Build multiple images:

    ./build.sh duckdb headless-chrome

Build everything:

    ./build.sh --all

Images are tagged as `yolean/{name}:{tag}` locally.

## CI

The workflow at `.github/workflows/images.yaml` is generated by `test.sh`.
After editing image lists in `images.sh` or build step templates in `test.sh`,
regenerate with:

    ./test.sh

The workflow uses registry-based BuildKit cache (`type=registry`) stored
as `ghcr.io/yolean/{name}:_buildcache*` manifests.
